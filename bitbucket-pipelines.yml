#  Template NodeJS build

#  This template allows you to validate your NodeJS code.
#  The workflow allows running tests and code linting on the default branch.

image: node:20.10.0

pipelines:
  default:
    - step:
        name: Install dependencies and run tests
        caches:
          - node
        script:
          - yarn install
          - yarn test
    - step:
        name: SonarQube Scan
        script:
          - pipe: sonarsource/sonarqube-scan:2.0.1
            variables:
              SONAR_HOST_URL: https://sonarcloud.io/ # Get the value from the repository/workspace variable.
              SONAR_TOKEN: ${SONAR_TOKEN} # Get the value from the repository/workspace variable. You shouldn't set secret in clear text here.
              SONAR_ORGANIZATION: ${SONAR_ORGANIZATION} # Get the value from the repository/workspace variable.
